
<!doctype html>
<html lang="de" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Offizielle Dokumentation für ThemisDB (Architektur, Storage, Query/AQL, Sicherheit, APIs und Betrieb)">
      
      
      
        <link rel="canonical" href="https://example.local/themisdb/docs/transactions/">
      
      
        <link rel="prev" href="../mvcc_design/">
      
      
        <link rel="next" href="../time_series/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.23">
    
    
      
        <title>Transaktionen - ThemisDB Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.84d31ad4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/print-site.css">
    
      <link rel="stylesheet" href="../css/print-site-material.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#transaction-management-in-themis" class="md-skip">
          Zum Inhalt
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Kopfzeile">
    <a href=".." title="ThemisDB Docs" class="md-header__button md-logo" aria-label="ThemisDB Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ThemisDB Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Transaktionen
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Suche" placeholder="Suche" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Suche">
        
        <button type="reset" class="md-search__icon md-icon" title="Zurücksetzen" aria-label="Zurücksetzen" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Suche wird initialisiert
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/makr-code/ThemisDB" title="Zum Repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    makr-code/ThemisDB
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Hauptnavigation" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  Übersicht

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../architecture/" class="md-tabs__link">
        
  
  
    
  
  Architektur

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../base_entity/" class="md-tabs__link">
          
  
  
  Basismodell

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../storage/geo_relational_schema/" class="md-tabs__link">
          
  
  
  Storage & MVCC

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../indexes/" class="md-tabs__link">
          
  
  
  Indexe & Statistiken

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../query_engine_aql/" class="md-tabs__link">
          
  
  
  Query & AQL

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../content_pipeline/" class="md-tabs__link">
          
  
  
  Content Pipeline

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../search/hybrid_search_design/" class="md-tabs__link">
          
  
  
  Suche

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../performance_benchmarks/" class="md-tabs__link">
          
  
  
  Performance & Benchmarks

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../quality_assurance/" class="md-tabs__link">
        
  
  
    
  
  Qualitätssicherung

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../vector_ops/" class="md-tabs__link">
          
  
  
  Vektor & GNN

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../security/overview/" class="md-tabs__link">
          
  
  
  Sicherheit & Governance

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../deployment/" class="md-tabs__link">
          
  
  
  Deployment & Betrieb

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../publishing/" class="md-tabs__link">
        
  
  
    
  
  Publikation & Ablage

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../admin_tools_admin_guide/" class="md-tabs__link">
          
  
  
  Admin-Tools

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../apis/openapi/" class="md-tabs__link">
          
  
  
  APIs

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../styleguide/" class="md-tabs__link">
          
  
  
  Styleguide & Glossar

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../roadmap/" class="md-tabs__link">
        
  
  
    
  
  Roadmap

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../changelog/" class="md-tabs__link">
        
  
  
    
  
  Changelog

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../print_page/" class="md-tabs__link">
        
  
  
    
  
  Gesamte Dokumentation (Druckansicht)

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="ThemisDB Docs" class="md-nav__button md-logo" aria-label="ThemisDB Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    ThemisDB Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/makr-code/ThemisDB" title="Zum Repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    makr-code/ThemisDB
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Übersicht
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architektur
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Basismodell
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Basismodell
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../base_entity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base Entity & Keys
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../path_constraints/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pfad-Constraints
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../property_graph_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Property Graph Modell
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Storage & MVCC
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Storage & MVCC
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../storage/geo_relational_schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Storage-Layout (Geo/Relational)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../storage/rocksdb_layout/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RocksDB Storage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mvcc_design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MVCC-Design
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Transaktionen
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Transaktionen
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Inhaltsverzeichnis">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Inhaltsverzeichnis
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#uberblick" class="md-nav__link">
    <span class="md-ellipsis">
      Überblick
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Überblick">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kernfeatures" class="md-nav__link">
    <span class="md-ellipsis">
      Kernfeatures
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architektur" class="md-nav__link">
    <span class="md-ellipsis">
      Architektur
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Architektur">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#transactionmanager" class="md-nav__link">
    <span class="md-ellipsis">
      TransactionManager
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transaction-class" class="md-nav__link">
    <span class="md-ellipsis">
      Transaction Class
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#isolation-levels" class="md-nav__link">
    <span class="md-ellipsis">
      Isolation Levels
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Isolation Levels">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#readcommitted-default" class="md-nav__link">
    <span class="md-ellipsis">
      ReadCommitted (Default)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#snapshot" class="md-nav__link">
    <span class="md-ellipsis">
      Snapshot
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#http-rest-api" class="md-nav__link">
    <span class="md-ellipsis">
      HTTP REST API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HTTP REST API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#post-transactionbegin" class="md-nav__link">
    <span class="md-ellipsis">
      POST /transaction/begin
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-transactioncommit" class="md-nav__link">
    <span class="md-ellipsis">
      POST /transaction/commit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-transactionrollback" class="md-nav__link">
    <span class="md-ellipsis">
      POST /transaction/rollback
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-transactionstats" class="md-nav__link">
    <span class="md-ellipsis">
      GET /transaction/stats
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-cases-best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      Use Cases &amp; Best Practices
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Use Cases &amp; Best Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-atomares-multi-entity-update" class="md-nav__link">
    <span class="md-ellipsis">
      1. Atomares Multi-Entity Update
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-graph-operationen-mit-rollback" class="md-nav__link">
    <span class="md-ellipsis">
      2. Graph-Operationen mit Rollback
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-vector-index-mit-transaktionen" class="md-nav__link">
    <span class="md-ellipsis">
      3. Vector-Index mit Transaktionen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-long-running-transactions-cleanup" class="md-nav__link">
    <span class="md-ellipsis">
      4. Long-Running Transactions &amp; Cleanup
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-uberlegungen" class="md-nav__link">
    <span class="md-ellipsis">
      Performance-Überlegungen
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Performance-Überlegungen">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mvcc-overhead" class="md-nav__link">
    <span class="md-ellipsis">
      MVCC Overhead
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#isolation-level-trade-offs" class="md-nav__link">
    <span class="md-ellipsis">
      Isolation Level Trade-offs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#index-spezifische-kosten" class="md-nav__link">
    <span class="md-ellipsis">
      Index-spezifische Kosten
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bekannte-einschrankungen" class="md-nav__link">
    <span class="md-ellipsis">
      Bekannte Einschränkungen
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Bekannte Einschränkungen">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-vector-index-in-memory-cache" class="md-nav__link">
    <span class="md-ellipsis">
      1. Vector Index In-Memory Cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-konflikte-unter-parallelitat" class="md-nav__link">
    <span class="md-ellipsis">
      2. Konflikte unter Parallelität
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-transaction-timeout" class="md-nav__link">
    <span class="md-ellipsis">
      3. Transaction Timeout
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fehlerbehandlung" class="md-nav__link">
    <span class="md-ellipsis">
      Fehlerbehandlung
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Fehlerbehandlung">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#commit-failures" class="md-nav__link">
    <span class="md-ellipsis">
      Commit Failures
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-failures-http" class="md-nav__link">
    <span class="md-ellipsis">
      Network Failures (HTTP)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#auto-rollback-bei-exception" class="md-nav__link">
    <span class="md-ellipsis">
      Auto-Rollback bei Exception
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metriken-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      Metriken &amp; Monitoring
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Metriken &amp; Monitoring">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prometheus-integration" class="md-nav__link">
    <span class="md-ellipsis">
      Prometheus-Integration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grafana-dashboard" class="md-nav__link">
    <span class="md-ellipsis">
      Grafana Dashboard
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migrationshinweise" class="md-nav__link">
    <span class="md-ellipsis">
      Migrationshinweise
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Migrationshinweise">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#von-direct-api-zu-session-based-api" class="md-nav__link">
    <span class="md-ellipsis">
      Von Direct API zu Session-based API
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#weiterfuhrende-dokumentation" class="md-nav__link">
    <span class="md-ellipsis">
      Weiterführende Dokumentation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#changelog" class="md-nav__link">
    <span class="md-ellipsis">
      Changelog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Changelog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#version-10-28-oktober-2025" class="md-nav__link">
    <span class="md-ellipsis">
      Version 1.0 (28. Oktober 2025)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../time_series/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Time-Series Überblick
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../memory_tuning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Memory Tuning
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Indexe & Statistiken
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Indexe & Statistiken
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../indexes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Indexe
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../index_stats_maintenance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index-Statistiken & Wartung
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cursor_pagination/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cursor/Pagination
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Query & AQL
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Query & AQL
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../query_engine_aql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Query Engine & AQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aql_syntax/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AQL Syntax
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aql_explain_profile/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Explain & Profile
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../recursive_path_queries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rekursive Pfadabfragen
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../temporal_graphs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Temporale Graphen
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../temporal_time_range_queries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Zeitbereichs-Abfragen
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../semantic_cache/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Semantischer Cache
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Content Pipeline
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Content Pipeline
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../content_pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Content Pipeline
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../content_architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architektur-Details
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../content/ingestion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ingestion
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ingestion/json_ingestion_spec/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    JSON Ingestion Spec
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../content/geo_processor_design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Geo-Processor Design
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../content/image_processor_design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Image-Processor Design
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Suche
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Suche
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../search/hybrid_search_design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hybrid Search Design
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../search/pagination_benchmarks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pagination Benchmarks
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Performance & Benchmarks
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Performance & Benchmarks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../performance_benchmarks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Überblick & Tuning
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../compression_benchmarks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kompression
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../search/pagination_benchmarks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pagination Benchmarks
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../quality_assurance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Qualitätssicherung
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Vektor & GNN
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            Vektor & GNN
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vector_ops/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Vektor-Operationen
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../gnn_embeddings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GNN Embeddings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hnsw_persistence/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HNSW Persistenz & Warmstart
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Sicherheit & Governance
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            Sicherheit & Governance
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../security/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Überblick
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rbac_authorization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RBAC & Authorization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../security/key_management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Schlüsselverwaltung
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../encryption_strategy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Verschlüsselungsstrategie
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../encryption_deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Verschlüsselungsdeployment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../column_encryption/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Spaltenverschlüsselung
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../security/pii_detection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PII-Detection (Überblick)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pii_detection_engines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PII-Detection Engines
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pii_engine_signing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PII Engine Signing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../security/audit_and_retention/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Audit & Retention
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../security/threat_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Threat Model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../security_hardening_guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Security Hardening Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../security_audit_checklist/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Security Audit Checklist
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../compliance_audit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Compliance Audit
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../compliance_governance_strategy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Governance-Strategie
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../compliance_integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Compliance-Integration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../governance_usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Governance Usage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../security/security_compliance_review/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Security/Compliance Review
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13" >
        
          
          <label class="md-nav__link" for="__nav_13" id="__nav_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Deployment & Betrieb
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13">
            <span class="md-nav__icon md-icon"></span>
            Deployment & Betrieb
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deployment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tracing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tracing & Observability
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../change_data_capture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Change Data Capture (CDC)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../operations_runbook/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Operations Runbook
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../publishing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Publikation & Ablage
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_15" >
        
          
          <label class="md-nav__link" for="__nav_15" id="__nav_15_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Admin-Tools
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_15">
            <span class="md-nav__icon md-icon"></span>
            Admin-Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin_tools_admin_guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Admin Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin_tools_user_guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    User Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin_tools_feature_matrix/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Feature Matrix
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin_tools_search_sort_filter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Suche/Sortierung/Filter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin_tools_demo_script/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Demo-Script
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_16" >
        
          
          <label class="md-nav__link" for="__nav_16" id="__nav_16_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    APIs
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_16">
            <span class="md-nav__icon md-icon"></span>
            APIs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../apis/openapi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenAPI & Endpunkte
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../apis/openapi.md#sse-streaming-changefeed" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SSE-Streaming (Changefeed)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_17" >
        
          
          <label class="md-nav__link" for="__nav_17" id="__nav_17_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Styleguide & Glossar
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_17">
            <span class="md-nav__icon md-icon"></span>
            Styleguide & Glossar
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../styleguide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Styleguide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Glossar
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../roadmap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Roadmap
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Changelog
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../print_page/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gesamte Dokumentation (Druckansicht)
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Inhaltsverzeichnis">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Inhaltsverzeichnis
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#uberblick" class="md-nav__link">
    <span class="md-ellipsis">
      Überblick
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Überblick">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kernfeatures" class="md-nav__link">
    <span class="md-ellipsis">
      Kernfeatures
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architektur" class="md-nav__link">
    <span class="md-ellipsis">
      Architektur
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Architektur">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#transactionmanager" class="md-nav__link">
    <span class="md-ellipsis">
      TransactionManager
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transaction-class" class="md-nav__link">
    <span class="md-ellipsis">
      Transaction Class
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#isolation-levels" class="md-nav__link">
    <span class="md-ellipsis">
      Isolation Levels
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Isolation Levels">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#readcommitted-default" class="md-nav__link">
    <span class="md-ellipsis">
      ReadCommitted (Default)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#snapshot" class="md-nav__link">
    <span class="md-ellipsis">
      Snapshot
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#http-rest-api" class="md-nav__link">
    <span class="md-ellipsis">
      HTTP REST API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HTTP REST API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#post-transactionbegin" class="md-nav__link">
    <span class="md-ellipsis">
      POST /transaction/begin
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-transactioncommit" class="md-nav__link">
    <span class="md-ellipsis">
      POST /transaction/commit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-transactionrollback" class="md-nav__link">
    <span class="md-ellipsis">
      POST /transaction/rollback
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-transactionstats" class="md-nav__link">
    <span class="md-ellipsis">
      GET /transaction/stats
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-cases-best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      Use Cases &amp; Best Practices
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Use Cases &amp; Best Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-atomares-multi-entity-update" class="md-nav__link">
    <span class="md-ellipsis">
      1. Atomares Multi-Entity Update
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-graph-operationen-mit-rollback" class="md-nav__link">
    <span class="md-ellipsis">
      2. Graph-Operationen mit Rollback
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-vector-index-mit-transaktionen" class="md-nav__link">
    <span class="md-ellipsis">
      3. Vector-Index mit Transaktionen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-long-running-transactions-cleanup" class="md-nav__link">
    <span class="md-ellipsis">
      4. Long-Running Transactions &amp; Cleanup
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-uberlegungen" class="md-nav__link">
    <span class="md-ellipsis">
      Performance-Überlegungen
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Performance-Überlegungen">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mvcc-overhead" class="md-nav__link">
    <span class="md-ellipsis">
      MVCC Overhead
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#isolation-level-trade-offs" class="md-nav__link">
    <span class="md-ellipsis">
      Isolation Level Trade-offs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#index-spezifische-kosten" class="md-nav__link">
    <span class="md-ellipsis">
      Index-spezifische Kosten
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bekannte-einschrankungen" class="md-nav__link">
    <span class="md-ellipsis">
      Bekannte Einschränkungen
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Bekannte Einschränkungen">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-vector-index-in-memory-cache" class="md-nav__link">
    <span class="md-ellipsis">
      1. Vector Index In-Memory Cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-konflikte-unter-parallelitat" class="md-nav__link">
    <span class="md-ellipsis">
      2. Konflikte unter Parallelität
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-transaction-timeout" class="md-nav__link">
    <span class="md-ellipsis">
      3. Transaction Timeout
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fehlerbehandlung" class="md-nav__link">
    <span class="md-ellipsis">
      Fehlerbehandlung
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Fehlerbehandlung">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#commit-failures" class="md-nav__link">
    <span class="md-ellipsis">
      Commit Failures
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-failures-http" class="md-nav__link">
    <span class="md-ellipsis">
      Network Failures (HTTP)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#auto-rollback-bei-exception" class="md-nav__link">
    <span class="md-ellipsis">
      Auto-Rollback bei Exception
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metriken-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      Metriken &amp; Monitoring
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Metriken &amp; Monitoring">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prometheus-integration" class="md-nav__link">
    <span class="md-ellipsis">
      Prometheus-Integration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grafana-dashboard" class="md-nav__link">
    <span class="md-ellipsis">
      Grafana Dashboard
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migrationshinweise" class="md-nav__link">
    <span class="md-ellipsis">
      Migrationshinweise
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Migrationshinweise">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#von-direct-api-zu-session-based-api" class="md-nav__link">
    <span class="md-ellipsis">
      Von Direct API zu Session-based API
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#weiterfuhrende-dokumentation" class="md-nav__link">
    <span class="md-ellipsis">
      Weiterführende Dokumentation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#changelog" class="md-nav__link">
    <span class="md-ellipsis">
      Changelog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Changelog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#version-10-28-oktober-2025" class="md-nav__link">
    <span class="md-ellipsis">
      Version 1.0 (28. Oktober 2025)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="transaction-management-in-themis">Transaction Management in THEMIS<a class="headerlink" href="#transaction-management-in-themis" title="Permanent link">&para;</a></h1>
<p><strong>Version:</strong> 1.1<br />
<strong>Datum:</strong> 2. November 2025</p>
<h2 id="uberblick">Überblick<a class="headerlink" href="#uberblick" title="Permanent link">&para;</a></h2>
<p>THEMIS bietet ACID-konforme Transaktionen über alle Index-Typen hinweg (Relational, Graph, Vector). Transaktionen basieren auf MVCC mit Snapshot-Isolation und Konflikterkennung; Updates über Sekundär-, Graph- und Vektorindizes erfolgen atomar innerhalb der Transaktion.</p>
<h3 id="kernfeatures">Kernfeatures<a class="headerlink" href="#kernfeatures" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Atomicity</strong>: Alle Operationen innerhalb einer Transaktion werden atomar ausgeführt (all-or-nothing)</li>
<li><strong>MVCC &amp; Isolation</strong>: ReadCommitted (default) und Snapshot-Isolation mit konsistentem Sichtfenster</li>
<li><strong>Konflikterkennung</strong>: Write-Write-Konflikte werden beim Commit/Put erkannt und führen zu Fehlern/Abbrüchen</li>
<li><strong>Session-Management</strong>: Transaktionen sind über eindeutige Transaction-IDs identifizierbar</li>
<li><strong>Statistics Tracking</strong>: Umfassende Metriken (begun, committed, aborted, durations, success rate)</li>
<li><strong>Auto-Rollback</strong>: RAII-Pattern für automatisches Rollback bei Exception/Destruktion</li>
<li><strong>Multi-Index Support</strong>: Konsistente Updates über Secondary, Graph und Vector-Indizes</li>
</ul>
<hr />
<h2 id="architektur">Architektur<a class="headerlink" href="#architektur" title="Permanent link">&para;</a></h2>
<h3 id="transactionmanager">TransactionManager<a class="headerlink" href="#transactionmanager" title="Permanent link">&para;</a></h3>
<p>Zentrale Komponente für Session-basiertes Transaction-Management:</p>
<pre><code class="language-cpp">class TransactionManager {
public:
    // Session-based API (empfohlen für HTTP/Multi-Client)
    TransactionId beginTransaction(IsolationLevel isolation = IsolationLevel::ReadCommitted);
    Status commitTransaction(TransactionId id);
    void rollbackTransaction(TransactionId id);
    std::shared_ptr&lt;Transaction&gt; getTransaction(TransactionId id);

    // Direct API (für Single-Threaded/Embedded)
    Transaction begin(IsolationLevel isolation = IsolationLevel::ReadCommitted);

    // Statistics
    Stats getStats() const;
    void cleanupOldTransactions(std::chrono::seconds max_age);
};
</code></pre>
<h3 id="transaction-class">Transaction Class<a class="headerlink" href="#transaction-class" title="Permanent link">&para;</a></h3>
<p>Stellt Operationen innerhalb einer Transaktion bereit:</p>
<pre><code class="language-cpp">class Transaction {
public:
    // Metadata
    TransactionId getId() const;
    IsolationLevel getIsolationLevel() const;
    uint64_t getDurationMs() const;

    // Relational Operations
    Status putEntity(std::string_view table, const BaseEntity&amp; entity);
    Status eraseEntity(std::string_view table, std::string_view pk);

    // Graph Operations
    Status addEdge(const BaseEntity&amp; edgeEntity);
    Status deleteEdge(std::string_view edgeId);

    // Vector Operations
    Status addVector(const BaseEntity&amp; entity, std::string_view vectorField = &quot;embedding&quot;);
    Status updateVector(const BaseEntity&amp; entity, std::string_view vectorField = &quot;embedding&quot;);
    Status removeVector(std::string_view pk);

    // Finalization
    Status commit();
    void rollback();
};
</code></pre>
<h3 id="isolation-levels">Isolation Levels<a class="headerlink" href="#isolation-levels" title="Permanent link">&para;</a></h3>
<h4 id="readcommitted-default">ReadCommitted (Default)<a class="headerlink" href="#readcommitted-default" title="Permanent link">&para;</a></h4>
<ul>
<li>Lesezugriffe sehen nur committed data</li>
<li>Keine Dirty Reads</li>
<li>Non-Repeatable Reads möglich</li>
<li>Geeignet für: Standard OLTP-Workloads</li>
</ul>
<h4 id="snapshot">Snapshot<a class="headerlink" href="#snapshot" title="Permanent link">&para;</a></h4>
<ul>
<li>Point-in-time Konsistenz (Sichtfenster fixiert beim Begin)</li>
<li>Repeatable Reads innerhalb der Transaktion</li>
<li>Höhere Isolation, potenziell höherer Overhead</li>
<li>Geeignet für: Analytische Queries, konsistente Reports</li>
</ul>
<hr />
<h2 id="http-rest-api">HTTP REST API<a class="headerlink" href="#http-rest-api" title="Permanent link">&para;</a></h2>
<h3 id="post-transactionbegin">POST /transaction/begin<a class="headerlink" href="#post-transactionbegin" title="Permanent link">&para;</a></h3>
<p>Startet eine neue Transaktion.</p>
<p><strong>Request:</strong></p>
<pre><code class="language-json">{
  &quot;isolation&quot;: &quot;read_committed&quot;  // optional, default: &quot;read_committed&quot;
}
</code></pre>
<p><strong>Response:</strong></p>
<pre><code class="language-json">{
  &quot;transaction_id&quot;: 42,
  &quot;isolation&quot;: &quot;read_committed&quot;,
  &quot;status&quot;: &quot;begun&quot;
}
</code></pre>
<p><strong>cURL Beispiel:</strong></p>
<pre><code class="language-bash">curl -X POST http://localhost:8080/transaction/begin \
  -H &quot;Content-Type: application/json&quot; \
  -d '{&quot;isolation&quot;: &quot;snapshot&quot;}'
</code></pre>
<hr />
<h3 id="post-transactioncommit">POST /transaction/commit<a class="headerlink" href="#post-transactioncommit" title="Permanent link">&para;</a></h3>
<p>Committed eine Transaktion.</p>
<p><strong>Request:</strong></p>
<pre><code class="language-json">{
  &quot;transaction_id&quot;: 42
}
</code></pre>
<p><strong>Response (Success):</strong></p>
<pre><code class="language-json">{
  &quot;transaction_id&quot;: 42,
  &quot;status&quot;: &quot;committed&quot;,
  &quot;message&quot;: &quot;Transaction committed successfully&quot;
}
</code></pre>
<p><strong>Response (Error):</strong></p>
<pre><code class="language-json">{
  &quot;transaction_id&quot;: 42,
  &quot;status&quot;: &quot;error&quot;,
  &quot;error&quot;: &quot;Transaction not found or already completed&quot;
}
</code></pre>
<p><strong>cURL Beispiel:</strong></p>
<pre><code class="language-bash">curl -X POST http://localhost:8080/transaction/commit \
  -H &quot;Content-Type: application/json&quot; \
  -d '{&quot;transaction_id&quot;: 42}'
</code></pre>
<hr />
<h3 id="post-transactionrollback">POST /transaction/rollback<a class="headerlink" href="#post-transactionrollback" title="Permanent link">&para;</a></h3>
<p>Rollt eine Transaktion zurück.</p>
<p><strong>Request:</strong></p>
<pre><code class="language-json">{
  &quot;transaction_id&quot;: 42
}
</code></pre>
<p><strong>Response:</strong></p>
<pre><code class="language-json">{
  &quot;transaction_id&quot;: 42,
  &quot;status&quot;: &quot;rolled_back&quot;,
  &quot;message&quot;: &quot;Transaction rolled back successfully&quot;
}
</code></pre>
<p><strong>cURL Beispiel:</strong></p>
<pre><code class="language-bash">curl -X POST http://localhost:8080/transaction/rollback \
  -H &quot;Content-Type: application/json&quot; \
  -d '{&quot;transaction_id&quot;: 42}'
</code></pre>
<hr />
<h3 id="get-transactionstats">GET /transaction/stats<a class="headerlink" href="#get-transactionstats" title="Permanent link">&para;</a></h3>
<p>Liefert Statistiken über alle Transaktionen.</p>
<p><strong>Response:</strong></p>
<pre><code class="language-json">{
  &quot;total_begun&quot;: 1523,
  &quot;total_committed&quot;: 1401,
  &quot;total_aborted&quot;: 122,
  &quot;active_count&quot;: 3,
  &quot;avg_duration_ms&quot;: 45,
  &quot;max_duration_ms&quot;: 523,
  &quot;success_rate&quot;: 0.92
}
</code></pre>
<p><strong>cURL Beispiel:</strong></p>
<pre><code class="language-bash">curl http://localhost:8080/transaction/stats
</code></pre>
<hr />
<h2 id="use-cases-best-practices">Use Cases &amp; Best Practices<a class="headerlink" href="#use-cases-best-practices" title="Permanent link">&para;</a></h2>
<h3 id="1-atomares-multi-entity-update">1. Atomares Multi-Entity Update<a class="headerlink" href="#1-atomares-multi-entity-update" title="Permanent link">&para;</a></h3>
<p><strong>Problem:</strong> Mehrere Entities mit verschiedenen Indizes müssen atomar gespeichert werden.</p>
<p><strong>Lösung:</strong></p>
<pre><code class="language-bash"># Begin transaction
TXN_ID=$(curl -s -X POST http://localhost:8080/transaction/begin | jq -r '.transaction_id')

# Insert entities via transaction (hypothetisch - API-Erweiterung erforderlich)
# Aktuell: Direkte C++ API verwenden

# C++ Code:
auto txn_id = tx_manager-&gt;beginTransaction();
auto txn = tx_manager-&gt;getTransaction(txn_id);

BaseEntity user(&quot;user123&quot;);
user.setField(&quot;name&quot;, std::string(&quot;Alice&quot;));
user.setField(&quot;city&quot;, std::string(&quot;Berlin&quot;));
txn-&gt;putEntity(&quot;users&quot;, user);

BaseEntity order(&quot;order456&quot;);
order.setField(&quot;user_id&quot;, std::string(&quot;user123&quot;));
order.setField(&quot;total&quot;, 99.99);
txn-&gt;putEntity(&quot;orders&quot;, order);

// Commit via HTTP
curl -X POST http://localhost:8080/transaction/commit \
  -d &quot;{\&quot;transaction_id\&quot;: $TXN_ID}&quot;
</code></pre>
<hr />
<h3 id="2-graph-operationen-mit-rollback">2. Graph-Operationen mit Rollback<a class="headerlink" href="#2-graph-operationen-mit-rollback" title="Permanent link">&para;</a></h3>
<p><strong>Problem:</strong> Mehrere Graph-Edges sollen atomar hinzugefügt werden, bei Fehler Rollback.</p>
<p><strong>C++ Beispiel:</strong></p>
<pre><code class="language-cpp">auto txn_id = tx_manager-&gt;beginTransaction();
auto txn = tx_manager-&gt;getTransaction(txn_id);

try {
    // Add multiple edges
    BaseEntity edge1(&quot;edge1&quot;);
    edge1.setField(&quot;_from&quot;, std::string(&quot;user1&quot;));
    edge1.setField(&quot;_to&quot;, std::string(&quot;user2&quot;));
    edge1.setField(&quot;type&quot;, std::string(&quot;follows&quot;));
    txn-&gt;addEdge(edge1);

    BaseEntity edge2(&quot;edge2&quot;);
    edge2.setField(&quot;_from&quot;, std::string(&quot;user1&quot;));
    edge2.setField(&quot;_to&quot;, std::string(&quot;user3&quot;));
    edge2.setField(&quot;type&quot;, std::string(&quot;follows&quot;));
    txn-&gt;addEdge(edge2);

    // Validate business logic
    if (!validateFollowerLimit(txn)) {
        tx_manager-&gt;rollbackTransaction(txn_id);
        return Status::Error(&quot;Follower limit exceeded&quot;);
    }

    // Commit if all OK
    return tx_manager-&gt;commitTransaction(txn_id);
} catch (...) {
    tx_manager-&gt;rollbackTransaction(txn_id);
    throw;
}
</code></pre>
<hr />
<h3 id="3-vector-index-mit-transaktionen">3. Vector-Index mit Transaktionen<a class="headerlink" href="#3-vector-index-mit-transaktionen" title="Permanent link">&para;</a></h3>
<p><strong>Problem:</strong> Vector-Embedding und Metadaten sollen atomar gespeichert werden.</p>
<p><strong>C++ Beispiel:</strong></p>
<pre><code class="language-cpp">auto txn_id = tx_manager-&gt;beginTransaction();
auto txn = tx_manager-&gt;getTransaction(txn_id);

// Document with embedding
BaseEntity doc(&quot;doc123&quot;);
doc.setField(&quot;title&quot;, std::string(&quot;AI Research Paper&quot;));
doc.setField(&quot;author&quot;, std::string(&quot;Dr. Smith&quot;));
std::vector&lt;float&gt; embedding = {0.23f, 0.45f, 0.67f, /* ... 768 dims */};
doc.setField(&quot;embedding&quot;, embedding);

// Store entity (relational)
auto status = txn-&gt;putEntity(&quot;documents&quot;, doc);
if (!status.ok) {
    tx_manager-&gt;rollbackTransaction(txn_id);
    return status;
}

// Store vector (vector index)
status = txn-&gt;addVector(doc, &quot;embedding&quot;);
if (!status.ok) {
    tx_manager-&gt;rollbackTransaction(txn_id);
    return status;
}

// Commit both atomically
return tx_manager-&gt;commitTransaction(txn_id);
</code></pre>
<hr />
<h3 id="4-long-running-transactions-cleanup">4. Long-Running Transactions &amp; Cleanup<a class="headerlink" href="#4-long-running-transactions-cleanup" title="Permanent link">&para;</a></h3>
<p><strong>Problem:</strong> Vergessene/abgestürzte Clients hinterlassen offene Transaktionen.</p>
<p><strong>Best Practice:</strong></p>
<pre><code class="language-cpp">// Periodischer Cleanup (z.B. via Cronjob oder Background-Thread)
tx_manager-&gt;cleanupOldTransactions(std::chrono::hours(1));

// Metriken überwachen
auto stats = tx_manager-&gt;getStats();
if (stats.active_count &gt; 100) {
    THEMIS_WARN(&quot;High number of active transactions: {}&quot;, stats.active_count);
}
</code></pre>
<p><strong>HTTP Monitoring:</strong></p>
<pre><code class="language-bash"># Statistiken abrufen
curl http://localhost:8080/transaction/stats | jq '.active_count'

# Alert bei hoher Anzahl
if [ $(curl -s http://localhost:8080/transaction/stats | jq '.active_count') -gt 50 ]; then
  echo &quot;WARNING: Too many active transactions&quot;
fi
</code></pre>
<hr />
<h2 id="performance-uberlegungen">Performance-Überlegungen<a class="headerlink" href="#performance-uberlegungen" title="Permanent link">&para;</a></h2>
<h3 id="mvcc-overhead">MVCC Overhead<a class="headerlink" href="#mvcc-overhead" title="Permanent link">&para;</a></h3>
<ul>
<li>Snapshot-Verwaltung und Konflikterkennung erzeugen geringen Overhead gegenüber einfachen Writes</li>
<li>Benefit: Korrektheit unter Parallelität (kein Last-Write-Wins), konsistente Sicht</li>
</ul>
<h3 id="isolation-level-trade-offs">Isolation Level Trade-offs<a class="headerlink" href="#isolation-level-trade-offs" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Isolation Level</th>
<th>Read Overhead</th>
<th>Write Overhead</th>
<th>Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td>ReadCommitted</td>
<td>Minimal</td>
<td>Minimal</td>
<td>OLTP, Standard-Queries</td>
</tr>
<tr>
<td>Snapshot</td>
<td>+5-10%</td>
<td>+5-10%</td>
<td>Reports, Analytics</td>
</tr>
</tbody>
</table>
<h3 id="index-spezifische-kosten">Index-spezifische Kosten<a class="headerlink" href="#index-spezifische-kosten" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Secondary Index</strong>: ~0.05ms pro Index-Entry (Put/Delete)</li>
<li><strong>Graph Index</strong>: ~0.1ms pro Edge (2x Index-Entries: out + in)</li>
<li><strong>Vector Index</strong>: ~0.5-2ms (abhängig von HNSW-Parametern, Dimension)</li>
</ul>
<hr />
<h2 id="bekannte-einschrankungen">Bekannte Einschränkungen<a class="headerlink" href="#bekannte-einschrankungen" title="Permanent link">&para;</a></h2>
<h3 id="1-vector-index-in-memory-cache">1. Vector Index In-Memory Cache<a class="headerlink" href="#1-vector-index-in-memory-cache" title="Permanent link">&para;</a></h3>
<p><strong>Problem:</strong><br />
Der Vector-Index hält einen In-Memory Cache (HNSW-Struktur, <code>cache_</code> map). Bei Rollback werden RocksDB-Änderungen rückgängig gemacht, aber der Cache bleibt inkonsistent.</p>
<p><strong>Auswirkung:</strong>
- Nach Rollback können Vector-Searches falsch-positive Ergebnisse liefern
- Cache enthält Vektoren, die in RocksDB nicht existieren</p>
<p><strong>Workaround:</strong></p>
<pre><code class="language-cpp">// Nach Rollback: Vector-Index neu laden
vector_index-&gt;rebuildFromStorage();
</code></pre>
<p><strong>Zukünftige Verbesserung:</strong><br />
Callback-Mechanismus für commit/rollback, um Cache synchron zu halten.</p>
<hr />
<h3 id="2-konflikte-unter-parallelitat">2. Konflikte unter Parallelität<a class="headerlink" href="#2-konflikte-unter-parallelitat" title="Permanent link">&para;</a></h3>
<p><strong>Verhalten:</strong><br />
Write-Write-Konflikte werden erkannt und führen zu Fehlern beim Commit/Put. Clients sollten Retry-Logik mit Backoff implementieren, wenn eine Transaktion aufgrund eines Konflikts abgelehnt wird.</p>
<hr />
<h3 id="3-transaction-timeout">3. Transaction Timeout<a class="headerlink" href="#3-transaction-timeout" title="Permanent link">&para;</a></h3>
<p><strong>Limitation:</strong><br />
Keine automatischen Timeouts für aktive Transaktionen implementiert.</p>
<p><strong>Empfehlung:</strong></p>
<pre><code class="language-cpp">// Client-seitig: Timeout überwachen
auto start = std::chrono::system_clock::now();
auto txn_id = tx_manager-&gt;beginTransaction();

// ... operations ...

auto duration = std::chrono::system_clock::now() - start;
if (duration &gt; std::chrono::seconds(30)) {
    tx_manager-&gt;rollbackTransaction(txn_id);
    return Status::Error(&quot;Transaction timeout&quot;);
}
</code></pre>
<hr />
<h2 id="fehlerbehandlung">Fehlerbehandlung<a class="headerlink" href="#fehlerbehandlung" title="Permanent link">&para;</a></h2>
<h3 id="commit-failures">Commit Failures<a class="headerlink" href="#commit-failures" title="Permanent link">&para;</a></h3>
<pre><code class="language-cpp">auto status = tx_manager-&gt;commitTransaction(txn_id);
if (!status.ok) {
    // Mögliche Ursachen:
    // - Transaction nicht gefunden
    // - Bereits committed/rolled back
    // - RocksDB Write-Fehler (Disk-Full, Permissions)

    THEMIS_ERROR(&quot;Commit failed: {}&quot;, status.message);

    // Cleanup
    tx_manager-&gt;rollbackTransaction(txn_id);  // Safe auch bei bereits abgeschlossener Txn
}
</code></pre>
<h3 id="network-failures-http">Network Failures (HTTP)<a class="headerlink" href="#network-failures-http" title="Permanent link">&para;</a></h3>
<pre><code class="language-bash"># Retry-Logic mit Exponential Backoff
for i in {1..3}; do
  if curl -X POST http://localhost:8080/transaction/commit \
       -d &quot;{\&quot;transaction_id\&quot;: $TXN_ID}&quot; \
       --max-time 5; then
    break
  fi
  sleep $((2**i))
done
</code></pre>
<h3 id="auto-rollback-bei-exception">Auto-Rollback bei Exception<a class="headerlink" href="#auto-rollback-bei-exception" title="Permanent link">&para;</a></h3>
<pre><code class="language-cpp">{
    auto txn = tx_manager-&gt;begin();  // Direct API

    txn.putEntity(&quot;users&quot;, user);

    // Exception thrown -&gt; Destruktor ruft automatisch rollback()
    throw std::runtime_error(&quot;Business logic error&quot;);

}  // txn Destruktor: THEMIS_WARN + rollback()
</code></pre>
<hr />
<h2 id="metriken-monitoring">Metriken &amp; Monitoring<a class="headerlink" href="#metriken-monitoring" title="Permanent link">&para;</a></h2>
<h3 id="prometheus-integration">Prometheus-Integration<a class="headerlink" href="#prometheus-integration" title="Permanent link">&para;</a></h3>
<p>Transaction-Statistiken sind via <code>/metrics</code> Endpoint verfügbar:</p>
<pre><code># TYPE vccdb_transactions_begun_total counter
vccdb_transactions_begun_total 1523

# TYPE vccdb_transactions_committed_total counter
vccdb_transactions_committed_total 1401

# TYPE vccdb_transactions_aborted_total counter
vccdb_transactions_aborted_total 122

# TYPE vccdb_transactions_active gauge
vccdb_transactions_active 3

# TYPE vccdb_transaction_duration_ms histogram
vccdb_transaction_duration_ms_bucket{le=&quot;10&quot;} 834
vccdb_transaction_duration_ms_bucket{le=&quot;50&quot;} 1245
vccdb_transaction_duration_ms_bucket{le=&quot;100&quot;} 1398
vccdb_transaction_duration_ms_bucket{le=&quot;+Inf&quot;} 1523
vccdb_transaction_duration_ms_sum 68035
vccdb_transaction_duration_ms_count 1523
</code></pre>
<h3 id="grafana-dashboard">Grafana Dashboard<a class="headerlink" href="#grafana-dashboard" title="Permanent link">&para;</a></h3>
<p>Empfohlene Metriken:
- <strong>Transaction Rate</strong>: <code>rate(vccdb_transactions_begun_total[5m])</code>
- <strong>Success Rate</strong>: <code>vccdb_transactions_committed_total / vccdb_transactions_begun_total</code>
- <strong>Active Transactions</strong>: <code>vccdb_transactions_active</code>
- <strong>Avg Duration</strong>: <code>vccdb_transaction_duration_ms_sum / vccdb_transaction_duration_ms_count</code></p>
<hr />
<h2 id="migrationshinweise">Migrationshinweise<a class="headerlink" href="#migrationshinweise" title="Permanent link">&para;</a></h2>
<h3 id="von-direct-api-zu-session-based-api">Von Direct API zu Session-based API<a class="headerlink" href="#von-direct-api-zu-session-based-api" title="Permanent link">&para;</a></h3>
<p><strong>Vorher (Direct):</strong></p>
<pre><code class="language-cpp">auto txn = tx_manager-&gt;begin();
txn.putEntity(&quot;users&quot;, user);
txn.commit();
</code></pre>
<p><strong>Nachher (Session-based, HTTP-kompatibel):</strong></p>
<pre><code class="language-cpp">auto txn_id = tx_manager-&gt;beginTransaction();
auto txn = tx_manager-&gt;getTransaction(txn_id);
txn-&gt;putEntity(&quot;users&quot;, user);
tx_manager-&gt;commitTransaction(txn_id);
</code></pre>
<p><strong>Vorteil:</strong> Transaction-ID kann über HTTP/Network übertragen werden.</p>
<hr />
<h2 id="weiterfuhrende-dokumentation">Weiterführende Dokumentation<a class="headerlink" href="#weiterfuhrende-dokumentation" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="../architecture/">Architecture Overview</a> - Systemarchitektur</li>
<li><a href="../mvcc_design/">MVCC Design</a> - Hintergründe &amp; Optionen</li>
<li><a href="../storage/rocksdb_layout/">RocksDB Storage</a> - WAL/Snapshots/Compaction</li>
<li><a href="../deployment/">Deployment Guide</a> - Production Setup</li>
<li><a href="../openapi.yaml">OpenAPI Specification</a> - Vollständige API-Referenz</li>
<li><a href="../base_entity/">Base Entity Documentation</a> - Entity-Serialisierung</li>
</ul>
<hr />
<h2 id="changelog">Changelog<a class="headerlink" href="#changelog" title="Permanent link">&para;</a></h2>
<h3 id="version-10-28-oktober-2025">Version 1.0 (28. Oktober 2025)<a class="headerlink" href="#version-10-28-oktober-2025" title="Permanent link">&para;</a></h3>
<ul>
<li>Initial release</li>
<li>Session-based Transaction Management</li>
<li>Isolation Levels: ReadCommitted, Snapshot</li>
<li>Multi-Index Support: Secondary, Graph, Vector</li>
<li>HTTP REST API: begin, commit, rollback, stats</li>
<li>Comprehensive Statistics &amp; Monitoring</li>
<li>23 Unit-Tests (100% Pass-Rate)</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.instant", "content.code.copy"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "In Zwischenablage kopiert", "clipboard.copy": "In Zwischenablage kopieren", "search.result.more.one": "1 weiteres Suchergebnis auf dieser Seite", "search.result.more.other": "# weitere Suchergebnisse auf dieser Seite", "search.result.none": "Keine Suchergebnisse", "search.result.one": "1 Suchergebnis", "search.result.other": "# Suchergebnisse", "search.result.placeholder": "Suchbegriff eingeben", "search.result.term.missing": "Es fehlt", "select.version": "Version ausw\u00e4hlen"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../js/print-site.js"></script>
      
    
  </body>
</html>