
<!doctype html>
<html lang="de" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Offizielle Dokumentation für ThemisDB (Architektur, Storage, Query/AQL, Sicherheit, APIs und Betrieb)">
      
      
      
        <link rel="canonical" href="https://example.local/themisdb/docs/base_entity/">
      
      
        <link rel="prev" href="../architecture/">
      
      
        <link rel="next" href="../path_constraints/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.23">
    
    
      
        <title>Base Entity & Keys - ThemisDB Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.84d31ad4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/print-site.css">
    
      <link rel="stylesheet" href="../css/print-site-material.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#basismodell-der-datenbank" class="md-skip">
          Zum Inhalt
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Kopfzeile">
    <a href=".." title="ThemisDB Docs" class="md-header__button md-logo" aria-label="ThemisDB Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ThemisDB Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Base Entity & Keys
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Suche" placeholder="Suche" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Suche">
        
        <button type="reset" class="md-search__icon md-icon" title="Zurücksetzen" aria-label="Zurücksetzen" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Suche wird initialisiert
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/makr-code/ThemisDB" title="Zum Repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    makr-code/ThemisDB
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Hauptnavigation" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  Übersicht

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../architecture/" class="md-tabs__link">
        
  
  
    
  
  Architektur

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  
  Basismodell

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../storage/geo_relational_schema/" class="md-tabs__link">
          
  
  
  Storage & MVCC

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../indexes/" class="md-tabs__link">
          
  
  
  Indexe & Statistiken

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../query_engine_aql/" class="md-tabs__link">
          
  
  
  Query & AQL

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../content_pipeline/" class="md-tabs__link">
          
  
  
  Content Pipeline

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../search/hybrid_search_design/" class="md-tabs__link">
          
  
  
  Suche

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../performance_benchmarks/" class="md-tabs__link">
          
  
  
  Performance & Benchmarks

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../quality_assurance/" class="md-tabs__link">
        
  
  
    
  
  Qualitätssicherung

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../vector_ops/" class="md-tabs__link">
          
  
  
  Vektor & GNN

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../security/overview/" class="md-tabs__link">
          
  
  
  Sicherheit & Governance

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../deployment/" class="md-tabs__link">
          
  
  
  Deployment & Betrieb

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../publishing/" class="md-tabs__link">
        
  
  
    
  
  Publikation & Ablage

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../admin_tools_admin_guide/" class="md-tabs__link">
          
  
  
  Admin-Tools

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../apis/openapi/" class="md-tabs__link">
          
  
  
  APIs

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../styleguide/" class="md-tabs__link">
          
  
  
  Styleguide & Glossar

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../roadmap/" class="md-tabs__link">
        
  
  
    
  
  Roadmap

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../changelog/" class="md-tabs__link">
        
  
  
    
  
  Changelog

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../print_page/" class="md-tabs__link">
        
  
  
    
  
  Gesamte Dokumentation (Druckansicht)

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="ThemisDB Docs" class="md-nav__button md-logo" aria-label="ThemisDB Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    ThemisDB Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/makr-code/ThemisDB" title="Zum Repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    makr-code/ThemisDB
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Übersicht
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architektur
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Basismodell
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Basismodell
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Base Entity & Keys
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Base Entity & Keys
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Inhaltsverzeichnis">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Inhaltsverzeichnis
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#uberblick" class="md-nav__link">
    <span class="md-ellipsis">
      Überblick
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Überblick">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kernkonzepte" class="md-nav__link">
    <span class="md-ellipsis">
      Kernkonzepte
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-baseentity-die-speichereinheit" class="md-nav__link">
    <span class="md-ellipsis">
      1. BaseEntity – Die Speichereinheit
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. BaseEntity – Die Speichereinheit">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-architektur" class="md-nav__link">
    <span class="md-ellipsis">
      1.1 Architektur
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-value-typsystem" class="md-nav__link">
    <span class="md-ellipsis">
      1.2 Value-Typsystem
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-key-schema-namespacing-hierarchie" class="md-nav__link">
    <span class="md-ellipsis">
      2. Key Schema – Namespacing &amp; Hierarchie
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Key Schema – Namespacing &amp; Hierarchie">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-multi-modell-schlussel" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 Multi-Modell-Schlüssel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-schlussel-formate" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 Schlüssel-Formate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-primary-key-extraktion" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 Primary Key Extraktion
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-ttl-retention-automatisches-ablaufen" class="md-nav__link">
    <span class="md-ellipsis">
      3. TTL &amp; Retention – Automatisches Ablaufen
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. TTL &amp; Retention – Automatisches Ablaufen">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-ttl-index-konzept" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 TTL-Index-Konzept
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-mechanik" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 Mechanik
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-retention-fur-time-series" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 Retention für Time-Series
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-verwendungsbeispiele" class="md-nav__link">
    <span class="md-ellipsis">
      4. Verwendungsbeispiele
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Verwendungsbeispiele">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-entity-erstellen-persistieren" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 Entity erstellen &amp; persistieren
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-entity-laden-felder-lesen" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 Entity laden &amp; Felder lesen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-vector-embeddings" class="md-nav__link">
    <span class="md-ellipsis">
      4.3 Vector-Embeddings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44-index-updates-secondary-index" class="md-nav__link">
    <span class="md-ellipsis">
      4.4 Index-Updates (Secondary Index)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-performance-implementierung" class="md-nav__link">
    <span class="md-ellipsis">
      5. Performance &amp; Implementierung
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Performance &amp; Implementierung">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-lazy-parsing-field-cache" class="md-nav__link">
    <span class="md-ellipsis">
      5.1 Lazy Parsing (Field Cache)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-simdjson-integration-json-format" class="md-nav__link">
    <span class="md-ellipsis">
      5.2 simdjson Integration (JSON Format)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-binary-format-effizienz" class="md-nav__link">
    <span class="md-ellipsis">
      5.3 Binary Format Effizienz
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#54-binary-format-struktur" class="md-nav__link">
    <span class="md-ellipsis">
      5.4 Binary Format Struktur
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      6. Best Practices
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Best Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-storage-format-wahl" class="md-nav__link">
    <span class="md-ellipsis">
      6.1 Storage-Format-Wahl
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-feld-extraktion-fur-index-updates" class="md-nav__link">
    <span class="md-ellipsis">
      6.2 Feld-Extraktion für Index-Updates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#63-batch-updates-atomaritat" class="md-nav__link">
    <span class="md-ellipsis">
      6.3 Batch-Updates (Atomarität)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#64-vector-embeddings-optimieren" class="md-nav__link">
    <span class="md-ellipsis">
      6.4 Vector-Embeddings optimieren
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#65-thread-safety" class="md-nav__link">
    <span class="md-ellipsis">
      6.5 Thread Safety
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-zukunftige-erweiterungen" class="md-nav__link">
    <span class="md-ellipsis">
      7. Zukünftige Erweiterungen
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#referenzen" class="md-nav__link">
    <span class="md-ellipsis">
      Referenzen
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../path_constraints/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pfad-Constraints
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../property_graph_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Property Graph Modell
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Storage & MVCC
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Storage & MVCC
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../storage/geo_relational_schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Storage-Layout (Geo/Relational)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../storage/rocksdb_layout/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RocksDB Storage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mvcc_design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MVCC-Design
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../transactions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Transaktionen
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../time_series/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Time-Series Überblick
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../memory_tuning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Memory Tuning
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Indexe & Statistiken
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Indexe & Statistiken
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../indexes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Indexe
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../index_stats_maintenance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index-Statistiken & Wartung
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cursor_pagination/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cursor/Pagination
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Query & AQL
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Query & AQL
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../query_engine_aql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Query Engine & AQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aql_syntax/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AQL Syntax
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aql_explain_profile/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Explain & Profile
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../recursive_path_queries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rekursive Pfadabfragen
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../temporal_graphs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Temporale Graphen
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../temporal_time_range_queries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Zeitbereichs-Abfragen
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../semantic_cache/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Semantischer Cache
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Content Pipeline
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Content Pipeline
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../content_pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Content Pipeline
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../content_architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architektur-Details
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../content/ingestion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ingestion
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ingestion/json_ingestion_spec/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    JSON Ingestion Spec
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../content/geo_processor_design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Geo-Processor Design
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../content/image_processor_design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Image-Processor Design
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Suche
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Suche
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../search/hybrid_search_design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hybrid Search Design
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../search/pagination_benchmarks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pagination Benchmarks
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Performance & Benchmarks
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Performance & Benchmarks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../performance_benchmarks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Überblick & Tuning
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../compression_benchmarks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kompression
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../search/pagination_benchmarks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pagination Benchmarks
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../quality_assurance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Qualitätssicherung
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Vektor & GNN
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            Vektor & GNN
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vector_ops/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Vektor-Operationen
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../gnn_embeddings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GNN Embeddings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hnsw_persistence/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HNSW Persistenz & Warmstart
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Sicherheit & Governance
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            Sicherheit & Governance
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../security/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Überblick
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rbac_authorization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RBAC & Authorization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../security/key_management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Schlüsselverwaltung
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../encryption_strategy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Verschlüsselungsstrategie
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../encryption_deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Verschlüsselungsdeployment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../column_encryption/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Spaltenverschlüsselung
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../security/pii_detection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PII-Detection (Überblick)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pii_detection_engines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PII-Detection Engines
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pii_engine_signing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PII Engine Signing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../security/audit_and_retention/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Audit & Retention
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../security/threat_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Threat Model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../security_hardening_guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Security Hardening Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../security_audit_checklist/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Security Audit Checklist
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../compliance_audit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Compliance Audit
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../compliance_governance_strategy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Governance-Strategie
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../compliance_integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Compliance-Integration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../governance_usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Governance Usage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../security/security_compliance_review/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Security/Compliance Review
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13" >
        
          
          <label class="md-nav__link" for="__nav_13" id="__nav_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Deployment & Betrieb
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13">
            <span class="md-nav__icon md-icon"></span>
            Deployment & Betrieb
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deployment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tracing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tracing & Observability
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../change_data_capture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Change Data Capture (CDC)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../operations_runbook/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Operations Runbook
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../publishing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Publikation & Ablage
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_15" >
        
          
          <label class="md-nav__link" for="__nav_15" id="__nav_15_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Admin-Tools
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_15">
            <span class="md-nav__icon md-icon"></span>
            Admin-Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin_tools_admin_guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Admin Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin_tools_user_guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    User Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin_tools_feature_matrix/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Feature Matrix
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin_tools_search_sort_filter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Suche/Sortierung/Filter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin_tools_demo_script/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Demo-Script
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_16" >
        
          
          <label class="md-nav__link" for="__nav_16" id="__nav_16_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    APIs
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_16">
            <span class="md-nav__icon md-icon"></span>
            APIs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../apis/openapi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenAPI & Endpunkte
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../apis/openapi.md#sse-streaming-changefeed" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SSE-Streaming (Changefeed)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_17" >
        
          
          <label class="md-nav__link" for="__nav_17" id="__nav_17_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Styleguide & Glossar
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_17">
            <span class="md-nav__icon md-icon"></span>
            Styleguide & Glossar
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../styleguide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Styleguide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Glossar
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../roadmap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Roadmap
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Changelog
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../print_page/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gesamte Dokumentation (Druckansicht)
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Inhaltsverzeichnis">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Inhaltsverzeichnis
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#uberblick" class="md-nav__link">
    <span class="md-ellipsis">
      Überblick
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Überblick">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kernkonzepte" class="md-nav__link">
    <span class="md-ellipsis">
      Kernkonzepte
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-baseentity-die-speichereinheit" class="md-nav__link">
    <span class="md-ellipsis">
      1. BaseEntity – Die Speichereinheit
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. BaseEntity – Die Speichereinheit">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-architektur" class="md-nav__link">
    <span class="md-ellipsis">
      1.1 Architektur
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-value-typsystem" class="md-nav__link">
    <span class="md-ellipsis">
      1.2 Value-Typsystem
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-key-schema-namespacing-hierarchie" class="md-nav__link">
    <span class="md-ellipsis">
      2. Key Schema – Namespacing &amp; Hierarchie
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Key Schema – Namespacing &amp; Hierarchie">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-multi-modell-schlussel" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 Multi-Modell-Schlüssel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-schlussel-formate" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 Schlüssel-Formate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-primary-key-extraktion" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 Primary Key Extraktion
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-ttl-retention-automatisches-ablaufen" class="md-nav__link">
    <span class="md-ellipsis">
      3. TTL &amp; Retention – Automatisches Ablaufen
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. TTL &amp; Retention – Automatisches Ablaufen">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-ttl-index-konzept" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 TTL-Index-Konzept
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-mechanik" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 Mechanik
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-retention-fur-time-series" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 Retention für Time-Series
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-verwendungsbeispiele" class="md-nav__link">
    <span class="md-ellipsis">
      4. Verwendungsbeispiele
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Verwendungsbeispiele">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-entity-erstellen-persistieren" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 Entity erstellen &amp; persistieren
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-entity-laden-felder-lesen" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 Entity laden &amp; Felder lesen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-vector-embeddings" class="md-nav__link">
    <span class="md-ellipsis">
      4.3 Vector-Embeddings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44-index-updates-secondary-index" class="md-nav__link">
    <span class="md-ellipsis">
      4.4 Index-Updates (Secondary Index)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-performance-implementierung" class="md-nav__link">
    <span class="md-ellipsis">
      5. Performance &amp; Implementierung
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Performance &amp; Implementierung">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-lazy-parsing-field-cache" class="md-nav__link">
    <span class="md-ellipsis">
      5.1 Lazy Parsing (Field Cache)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-simdjson-integration-json-format" class="md-nav__link">
    <span class="md-ellipsis">
      5.2 simdjson Integration (JSON Format)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-binary-format-effizienz" class="md-nav__link">
    <span class="md-ellipsis">
      5.3 Binary Format Effizienz
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#54-binary-format-struktur" class="md-nav__link">
    <span class="md-ellipsis">
      5.4 Binary Format Struktur
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      6. Best Practices
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Best Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-storage-format-wahl" class="md-nav__link">
    <span class="md-ellipsis">
      6.1 Storage-Format-Wahl
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-feld-extraktion-fur-index-updates" class="md-nav__link">
    <span class="md-ellipsis">
      6.2 Feld-Extraktion für Index-Updates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#63-batch-updates-atomaritat" class="md-nav__link">
    <span class="md-ellipsis">
      6.3 Batch-Updates (Atomarität)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#64-vector-embeddings-optimieren" class="md-nav__link">
    <span class="md-ellipsis">
      6.4 Vector-Embeddings optimieren
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#65-thread-safety" class="md-nav__link">
    <span class="md-ellipsis">
      6.5 Thread Safety
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-zukunftige-erweiterungen" class="md-nav__link">
    <span class="md-ellipsis">
      7. Zukünftige Erweiterungen
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#referenzen" class="md-nav__link">
    <span class="md-ellipsis">
      Referenzen
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="basismodell-der-datenbank">Basismodell der Datenbank<a class="headerlink" href="#basismodell-der-datenbank" title="Permanent link">&para;</a></h1>
<p><strong>Version:</strong> 1.1<br />
<strong>Status:</strong> Implementiert<br />
<strong>Letzte Aktualisierung:</strong> 28. Oktober 2025</p>
<hr />
<h2 id="uberblick">Überblick<a class="headerlink" href="#uberblick" title="Permanent link">&para;</a></h2>
<p>Das <strong>Basismodell</strong> von THEMIS definiert die fundamentale Speichereinheit für alle Datenmodelle (relational, document, graph, vector). Jede logische Entität wird als <strong>BaseEntity</strong> gespeichert – ein einzelnes binäres Blob mit effizienter Serialisierung und schnellem Feldzugriff.</p>
<h3 id="kernkonzepte">Kernkonzepte<a class="headerlink" href="#kernkonzepte" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>BaseEntity</strong>: Kanonische Speichereinheit (ein Blob pro Entität)</li>
<li><strong>Primary Key</strong>: Eindeutige Identifikation innerhalb eines Namespace (table/collection/graph)</li>
<li><strong>Key Schema</strong>: Hierarchisches Schlüssel-System für Multi-Modell-Zugriff</li>
<li><strong>TTL/Retention</strong>: Automatische Ablauf-Mechanik über TTL-Indizes</li>
<li><strong>Path Constraints</strong>: Geplante Constraints für Graph-Traversals (siehe <a href="../path_constraints/">Path Constraints</a>)</li>
</ol>
<hr />
<h2 id="1-baseentity-die-speichereinheit">1. BaseEntity – Die Speichereinheit<a class="headerlink" href="#1-baseentity-die-speichereinheit" title="Permanent link">&para;</a></h2>
<h3 id="11-architektur">1.1 Architektur<a class="headerlink" href="#11-architektur" title="Permanent link">&para;</a></h3>
<p><code>BaseEntity</code> ist die zentrale Klasse für alle persistierten Daten:</p>
<pre><code class="language-cpp">class BaseEntity {
public:
    using Blob = std::vector&lt;uint8_t&gt;;
    using FieldMap = std::map&lt;std::string, Value&gt;;

    enum class Format { BINARY, JSON };

    // Primärschlüssel
    const std::string&amp; getPrimaryKey() const;
    void setPrimaryKey(std::string_view pk);

    // Feld-Zugriff (lazy parsing)
    std::optional&lt;Value&gt; getField(std::string_view field_name) const;
    void setField(std::string_view field_name, const Value&amp; value);

    // Serialisierung
    Blob serialize() const;
    std::string toJson() const;

    // Factory-Methoden
    static BaseEntity fromJson(std::string_view pk, std::string_view json_str);
    static BaseEntity fromFields(std::string_view pk, const FieldMap&amp; fields);
    static BaseEntity deserialize(std::string_view pk, const Blob&amp; blob);

private:
    std::string primary_key_;
    Blob blob_;
    Format format_ = Format::BINARY;
    mutable std::shared_ptr&lt;FieldMap&gt; field_cache_;
};
</code></pre>
<h3 id="12-value-typsystem">1.2 Value-Typsystem<a class="headerlink" href="#12-value-typsystem" title="Permanent link">&para;</a></h3>
<p><code>Value</code> ist ein <code>std::variant</code> mit folgenden Typen:</p>
<table>
<thead>
<tr>
<th>Typ</th>
<th>C++ Typ</th>
<th>Verwendung</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>null</strong></td>
<td><code>std::monostate</code></td>
<td>Fehlende/leere Werte</td>
</tr>
<tr>
<td><strong>bool</strong></td>
<td><code>bool</code></td>
<td>Wahrheitswerte</td>
</tr>
<tr>
<td><strong>int</strong></td>
<td><code>int64_t</code></td>
<td>Ganzzahlen</td>
</tr>
<tr>
<td><strong>double</strong></td>
<td><code>double</code></td>
<td>Gleitkommazahlen</td>
</tr>
<tr>
<td><strong>string</strong></td>
<td><code>std::string</code></td>
<td>Texte</td>
</tr>
<tr>
<td><strong>vector</strong></td>
<td><code>std::vector&lt;float&gt;</code></td>
<td>Embeddings (optimiert für ANN-Indizes)</td>
</tr>
<tr>
<td><strong>binary</strong></td>
<td><code>std::vector&lt;uint8_t&gt;</code></td>
<td>Binärdaten</td>
</tr>
</tbody>
</table>
<p><strong>Hinweis:</strong> Nested Objects/Arrays sind aktuell nicht unterstützt (geplant für zukünftige Version).</p>
<hr />
<h2 id="2-key-schema-namespacing-hierarchie">2. Key Schema – Namespacing &amp; Hierarchie<a class="headerlink" href="#2-key-schema-namespacing-hierarchie" title="Permanent link">&para;</a></h2>
<h3 id="21-multi-modell-schlussel">2.1 Multi-Modell-Schlüssel<a class="headerlink" href="#21-multi-modell-schlussel" title="Permanent link">&para;</a></h3>
<p>THEMIS nutzt ein hierarchisches Schlüssel-System mit <strong>Präfixen</strong>, um alle Datenmodelle in einer RocksDB zu vereinen:</p>
<pre><code class="language-cpp">class KeySchema {
public:
    enum class KeyType {
        RELATIONAL,        // Tabellenzeilen
        DOCUMENT,          // Dokumente
        GRAPH_NODE,        // Graph-Knoten
        GRAPH_EDGE,        // Graph-Kanten
        VECTOR,            // Vektor-Objekte
        SECONDARY_INDEX,   // Sekundärindizes
        GRAPH_OUTDEX,      // Outgoing Edges
        GRAPH_INDEX        // Incoming Edges
    };

    // Key-Konstruktion
    static std::string makeRelationalKey(std::string_view table, std::string_view pk);
    static std::string makeGraphNodeKey(std::string_view pk);
    static std::string makeSecondaryIndexKey(
        std::string_view table,
        std::string_view column,
        std::string_view value,
        std::string_view pk
    );
};
</code></pre>
<h3 id="22-schlussel-formate">2.2 Schlüssel-Formate<a class="headerlink" href="#22-schlussel-formate" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Datenmodell</th>
<th>Schlüsselformat</th>
<th>Beispiel</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Relational</strong></td>
<td><code>entity:table:pk</code></td>
<td><code>entity:users:alice</code></td>
</tr>
<tr>
<td><strong>Document</strong></td>
<td><code>entity:collection:pk</code></td>
<td><code>entity:orders:order_123</code></td>
</tr>
<tr>
<td><strong>Graph Node</strong></td>
<td><code>entity:node:pk</code></td>
<td><code>entity:node:user_456</code></td>
</tr>
<tr>
<td><strong>Graph Edge</strong></td>
<td><code>entity:edge:pk</code></td>
<td><code>entity:edge:follows_789</code></td>
</tr>
<tr>
<td><strong>Vector</strong></td>
<td><code>entity:vectors:pk</code></td>
<td><code>entity:vectors:doc_abc</code></td>
</tr>
<tr>
<td><strong>Secondary Index</strong></td>
<td><code>idx:table:column:value:pk</code></td>
<td><code>idx:users:age:30:alice</code></td>
</tr>
<tr>
<td><strong>Range Index</strong></td>
<td><code>ridx:table:column:value:pk</code></td>
<td><code>ridx:products:price:99.99:prod_1</code></td>
</tr>
<tr>
<td><strong>Spatial Index</strong></td>
<td><code>sidx:table:geohash:pk</code></td>
<td><code>sidx:locations:u33dc1:berlin</code></td>
</tr>
<tr>
<td><strong>TTL Index</strong></td>
<td><code>ttlidx:table:column:timestamp:pk</code></td>
<td><code>ttlidx:sessions:created_at:1730000000:sess_1</code></td>
</tr>
<tr>
<td><strong>Fulltext Index</strong></td>
<td><code>ftidx:table:column:token:pk</code></td>
<td><code>ftidx:articles:body:search:art_42</code></td>
</tr>
<tr>
<td><strong>Graph Outdex</strong></td>
<td><code>graph:out:pk_start:pk_edge</code></td>
<td><code>graph:out:alice:follows_789</code></td>
</tr>
<tr>
<td><strong>Graph Indeg</strong></td>
<td><code>graph:in:pk_target:pk_edge</code></td>
<td><code>graph:in:bob:follows_789</code></td>
</tr>
<tr>
<td><strong>Changefeed</strong></td>
<td><code>changefeed:pk:seqno</code></td>
<td><code>changefeed:alice:0000000001</code></td>
</tr>
<tr>
<td><strong>Time-Series</strong></td>
<td><code>ts:metric:entity:timestamp</code></td>
<td><code>ts:cpu:server1:1730000000000</code></td>
</tr>
</tbody>
</table>
<p><strong>Separator:</strong> Alle Schlüssel verwenden <code>:</code> als Trennzeichen.</p>
<h3 id="23-primary-key-extraktion">2.3 Primary Key Extraktion<a class="headerlink" href="#23-primary-key-extraktion" title="Permanent link">&para;</a></h3>
<pre><code class="language-cpp">// Aus beliebigem Schlüssel PK extrahieren
std::string pk = KeySchema::extractPrimaryKey(&quot;idx:users:age:30:alice&quot;);
// Ergebnis: &quot;alice&quot;

KeyType type = KeySchema::parseKeyType(&quot;entity:users:alice&quot;);
// Ergebnis: KeyType::RELATIONAL
</code></pre>
<p><strong>Siehe auch:</strong> <a href="../storage/rocksdb_layout/">RocksDB Storage Layout</a> für Details zu Key Prefixes und Column Families.</p>
<hr />
<h2 id="3-ttl-retention-automatisches-ablaufen">3. TTL &amp; Retention – Automatisches Ablaufen<a class="headerlink" href="#3-ttl-retention-automatisches-ablaufen" title="Permanent link">&para;</a></h2>
<h3 id="31-ttl-index-konzept">3.1 TTL-Index-Konzept<a class="headerlink" href="#31-ttl-index-konzept" title="Permanent link">&para;</a></h3>
<p>THEMIS unterstützt <strong>Time-To-Live (TTL)</strong> für Entitäten über spezielle TTL-Indizes:</p>
<pre><code class="language-cpp">// TTL-Index erstellen (Sessions laufen nach 3600 Sekunden ab)
idx.createTTLIndex(&quot;sessions&quot;, &quot;created_at&quot;, /*ttl_seconds=*/3600);

// Entity einfügen (TTL wird automatisch berechnet)
BaseEntity session(&quot;sess_123&quot;);
session.setField(&quot;user&quot;, &quot;alice&quot;);
session.setField(&quot;created_at&quot;, &quot;2025-10-27T10:00:00Z&quot;);
idx.put(&quot;sessions&quot;, session);
// → TTL-Eintrag: ttlidx:sessions:created_at:1730034000:sess_123

// Periodisch Cleanup aufrufen (z. B. CRON/Timer alle 60s)
auto [status, deletedCount] = idx.cleanupExpiredEntities(&quot;sessions&quot;, &quot;created_at&quot;);
</code></pre>
<h3 id="32-mechanik">3.2 Mechanik<a class="headerlink" href="#32-mechanik" title="Permanent link">&para;</a></h3>
<p><strong>Beim Put:</strong>
1. Aktueller Timestamp: <code>now = std::chrono::system_clock::now()</code>
2. Expire-Timestamp: <code>expire = now + ttl_seconds</code>
3. TTL-Index-Key: <code>ttlidx:table:column:{expire}:pk</code>
4. Atomare WriteBatch: Entity + TTL-Index-Eintrag</p>
<p><strong>Beim Cleanup:</strong>
1. Scan TTL-Index: <code>ttlidx:table:column:0</code> bis <code>ttlidx:table:column:{current_time}</code>
2. Für jeden PK: Lösche Entity + alle Indizes (atomar per WriteBatch)
3. Rückgabe: Anzahl gelöschter Entities</p>
<h3 id="33-retention-fur-time-series">3.3 Retention für Time-Series<a class="headerlink" href="#33-retention-fur-time-series" title="Permanent link">&para;</a></h3>
<p>Zusätzlich gibt es eine <strong>Retention Policy</strong> für Time-Series-Daten (TSStore):</p>
<pre><code class="language-cpp">RetentionPolicy policy;
policy.per_metric[&quot;cpu&quot;] = std::chrono::hours(24);      // CPU-Daten 24h
policy.per_metric[&quot;logs&quot;] = std::chrono::hours(72);     // Logs 72h

RetentionManager mgr(&amp;tsstore, policy);
size_t deleted = mgr.apply();  // Löscht alte Datenpunkte pro Metrik
</code></pre>
<p><strong>Hinweis:</strong> TTL-Indizes sind für Entities (Dokumente, Sessions, Cache), Retention ist für Time-Series (Metriken, Logs).</p>
<p><strong>Siehe auch:</strong>
- <a href="../index_stats_maintenance/">Index Stats &amp; Maintenance</a> für TTL-Index-Details
- <a href="../time_series/">Time-Series</a> für Retention Policies</p>
<hr />
<h2 id="4-verwendungsbeispiele">4. Verwendungsbeispiele<a class="headerlink" href="#4-verwendungsbeispiele" title="Permanent link">&para;</a></h2>
<h3 id="41-entity-erstellen-persistieren">4.1 Entity erstellen &amp; persistieren<a class="headerlink" href="#41-entity-erstellen-persistieren" title="Permanent link">&para;</a></h3>
<pre><code class="language-cpp">// Von Field Map erstellen
BaseEntity::FieldMap fields;
fields[&quot;name&quot;] = std::string(&quot;Alice&quot;);
fields[&quot;age&quot;] = int64_t(30);
fields[&quot;active&quot;] = true;

BaseEntity user = BaseEntity::fromFields(&quot;alice&quot;, fields);

// Von JSON erstellen
std::string json = R&quot;({&quot;name&quot;:&quot;Bob&quot;,&quot;age&quot;:25})&quot;;
BaseEntity user2 = BaseEntity::fromJson(&quot;bob&quot;, json);

// Serialisieren &amp; speichern
std::string key = KeySchema::makeRelationalKey(&quot;users&quot;, user.getPrimaryKey());
auto blob = user.serialize();
db.put(key, blob);
</code></pre>
<h3 id="42-entity-laden-felder-lesen">4.2 Entity laden &amp; Felder lesen<a class="headerlink" href="#42-entity-laden-felder-lesen" title="Permanent link">&para;</a></h3>
<pre><code class="language-cpp">// Von RocksDB laden
auto blob = db.get(&quot;entity:users:alice&quot;);
BaseEntity user = BaseEntity::deserialize(&quot;alice&quot;, *blob);

// Felder lesen (typsicher)
auto name = user.getFieldAsString(&quot;name&quot;);    // std::optional&lt;std::string&gt;
auto age = user.getFieldAsInt(&quot;age&quot;);         // std::optional&lt;int64_t&gt;
auto active = user.getFieldAsBool(&quot;active&quot;);  // std::optional&lt;bool&gt;

if (name &amp;&amp; age) {
    std::cout &lt;&lt; *name &lt;&lt; &quot; ist &quot; &lt;&lt; *age &lt;&lt; &quot; Jahre alt\n&quot;;
}

// Alle Felder extrahieren (für Index-Updates)
auto attrs = user.extractAllFields();
for (const auto&amp; [field, value] : attrs) {
    // Index-Einträge erstellen
}
</code></pre>
<h3 id="43-vector-embeddings">4.3 Vector-Embeddings<a class="headerlink" href="#43-vector-embeddings" title="Permanent link">&para;</a></h3>
<pre><code class="language-cpp">// Entity mit Embedding erstellen
std::vector&lt;float&gt; embedding = {0.1f, 0.2f, 0.3f, 0.4f};
BaseEntity doc(&quot;doc_123&quot;);
doc.setField(&quot;title&quot;, std::string(&quot;Artikel über KI&quot;));
doc.setField(&quot;embedding&quot;, embedding);

// Embedding für ANN-Index extrahieren
auto vec = doc.extractVector(&quot;embedding&quot;);
if (vec) {
    hnsw_index.add(*vec, doc.getPrimaryKey());
}
</code></pre>
<h3 id="44-index-updates-secondary-index">4.4 Index-Updates (Secondary Index)<a class="headerlink" href="#44-index-updates-secondary-index" title="Permanent link">&para;</a></h3>
<pre><code class="language-cpp">// Entity + Secondary Index atomar updaten
auto batch = db.createWriteBatch();

// Entity speichern
std::string entityKey = KeySchema::makeRelationalKey(&quot;users&quot;, &quot;alice&quot;);
batch-&gt;put(entityKey, user.serialize());

// Secondary Index für age=30
std::string idxKey = KeySchema::makeSecondaryIndexKey(&quot;users&quot;, &quot;age&quot;, &quot;30&quot;, &quot;alice&quot;);
batch-&gt;put(idxKey, &quot;alice&quot;);  // PK als Value

batch-&gt;commit();  // Atomar!
</code></pre>
<hr />
<h2 id="5-performance-implementierung">5. Performance &amp; Implementierung<a class="headerlink" href="#5-performance-implementierung" title="Permanent link">&para;</a></h2>
<h3 id="51-lazy-parsing-field-cache">5.1 Lazy Parsing (Field Cache)<a class="headerlink" href="#51-lazy-parsing-field-cache" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Field Cache</strong> wird beim ersten Feldzugriff befüllt</li>
<li>Nachfolgende Zugriffe nutzen Cache (keine erneute Deserialisierung)</li>
<li>Cache wird invalidiert bei Blob-Modifikation (<code>setField()</code>)</li>
</ul>
<pre><code class="language-cpp">// Erstes getField() → Parse Blob → Cache füllen
auto name = entity.getField(&quot;name&quot;);  // Parse!

// Zweites getField() → Cache verwenden
auto age = entity.getField(&quot;age&quot;);    // Cache Hit!

// setField() → Cache invalidieren
entity.setField(&quot;status&quot;, std::string(&quot;online&quot;));  // Cache invalidiert
</code></pre>
<h3 id="52-simdjson-integration-json-format">5.2 simdjson Integration (JSON Format)<a class="headerlink" href="#52-simdjson-integration-json-format" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>JSON Format</strong> nutzt simdjson on-demand API</li>
<li>Feld-Extraktion <strong>ohne vollständigen Parse</strong> (O(1))</li>
<li>Parsing-Throughput: <strong>Multi-GB/s</strong> auf modernen CPUs</li>
</ul>
<pre><code class="language-cpp">// JSON-Entity laden (lazy parsing)
BaseEntity entity = BaseEntity::fromJson(&quot;alice&quot;, json_string);

// Einzelne Felder extrahieren (simdjson on-demand)
auto name = entity.extractField(&quot;name&quot;);  // Kein vollständiger Parse!
</code></pre>
<h3 id="53-binary-format-effizienz">5.3 Binary Format Effizienz<a class="headerlink" href="#53-binary-format-effizienz" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Eigenschaft</th>
<th>JSON</th>
<th>Binary</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Größe</strong></td>
<td>100%</td>
<td>~60% (kompakter)</td>
</tr>
<tr>
<td><strong>Parse-Overhead</strong></td>
<td>Mittel (simdjson)</td>
<td>Minimal (direkter Zugriff)</td>
</tr>
<tr>
<td><strong>Vector-Encoding</strong></td>
<td>Base64/String</td>
<td>Native Float-Array</td>
</tr>
<tr>
<td><strong>Lesbarkeit</strong></td>
<td>Hoch</td>
<td>Niedrig</td>
</tr>
</tbody>
</table>
<p><strong>Empfehlung:</strong> Binary für Produktiv-Storage, JSON für Debugging/Export.</p>
<h3 id="54-binary-format-struktur">5.4 Binary Format Struktur<a class="headerlink" href="#54-binary-format-struktur" title="Permanent link">&para;</a></h3>
<pre><code>&lt;Object&gt;
  &lt;num_fields: uint32&gt;           // Anzahl Felder
  &lt;field_1&gt;
    &lt;name_length: uint32&gt;        // Feldname-Länge
    &lt;name: bytes&gt;                // Feldname (UTF-8)
    &lt;type_tag: uint8&gt;            // Typ (siehe Type Tags)
    &lt;value: varies by type&gt;      // Wert (typ-abhängig)
  &lt;field_2&gt;
    ...
</code></pre>
<p><strong>Type Tags:</strong></p>
<pre><code class="language-cpp">NULL_VALUE    = 0x00
BOOL_FALSE    = 0x01
BOOL_TRUE     = 0x02
INT64         = 0x11
DOUBLE        = 0x21
STRING        = 0x30
BINARY        = 0x40
VECTOR_FLOAT  = 0x70  // Optimiert für Embeddings (ohne extra Encoding)
</code></pre>
<hr />
<h2 id="6-best-practices">6. Best Practices<a class="headerlink" href="#6-best-practices" title="Permanent link">&para;</a></h2>
<h3 id="61-storage-format-wahl">6.1 Storage-Format-Wahl<a class="headerlink" href="#61-storage-format-wahl" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Binary Format</strong>: Immer für RocksDB-Storage (Standard, kompakt, schnell)</li>
<li><strong>JSON Format</strong>: Nur für Debugging, Export, HTTP-Responses</li>
</ul>
<pre><code class="language-cpp">// Produktiv: Binary
auto blob = entity.serialize();          // Binary (Standard)
db.put(key, blob);

// Debugging: JSON
std::string json = entity.toJson();      // Für Logs
THEMIS_DEBUG(&quot;Entity: {}&quot;, json);
</code></pre>
<h3 id="62-feld-extraktion-fur-index-updates">6.2 Feld-Extraktion für Index-Updates<a class="headerlink" href="#62-feld-extraktion-fur-index-updates" title="Permanent link">&para;</a></h3>
<pre><code class="language-cpp">// Schnell: Einzelne Felder extrahieren (ohne Full Parse)
auto name = entity.extractField(&quot;name&quot;);
auto age = entity.extractField(&quot;age&quot;);

// Langsamer: Alle Felder (Full Parse)
auto attrs = entity.extractAllFields();
</code></pre>
<p><strong>Regel:</strong> <code>extractField()</code> für gezielte Updates, <code>extractAllFields()</code> nur wenn alle Felder benötigt.</p>
<h3 id="63-batch-updates-atomaritat">6.3 Batch-Updates (Atomarität)<a class="headerlink" href="#63-batch-updates-atomaritat" title="Permanent link">&para;</a></h3>
<pre><code class="language-cpp">// ✅ RICHTIG: Atomare Updates via WriteBatch
auto batch = db.createWriteBatch();
batch-&gt;put(entity_key, entity.serialize());
batch-&gt;put(idx_key1, idx_value1);
batch-&gt;put(idx_key2, idx_value2);
batch-&gt;commit();  // Alles oder nichts!

// ❌ FALSCH: Einzelne Puts (nicht atomar)
db.put(entity_key, entity.serialize());
db.put(idx_key1, idx_value1);  // Fehler hier → Inkonsistenz!
</code></pre>
<h3 id="64-vector-embeddings-optimieren">6.4 Vector-Embeddings optimieren<a class="headerlink" href="#64-vector-embeddings-optimieren" title="Permanent link">&para;</a></h3>
<pre><code class="language-cpp">// ✅ RICHTIG: Native float-Vektoren (kein Encoding)
std::vector&lt;float&gt; embedding = model.encode(text);
entity.setField(&quot;embedding&quot;, embedding);

// ❌ FALSCH: String-Encoding (langsam, groß)
std::string encoded = serializeFloats(embedding);
entity.setField(&quot;embedding&quot;, encoded);
</code></pre>
<h3 id="65-thread-safety">6.5 Thread Safety<a class="headerlink" href="#65-thread-safety" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Ein <code>BaseEntity</code> pro Thread</strong> (keine Shared Ownership)</li>
<li>simdjson-Parser ist thread-local (automatisch)</li>
<li>Bei Shared Access: Locks verwenden</li>
</ul>
<pre><code class="language-cpp">// ✅ RICHTIG: Separate Instanzen
std::thread t1([&amp;]() {
    BaseEntity e1 = BaseEntity::deserialize(&quot;alice&quot;, blob);
});
std::thread t2([&amp;]() {
    BaseEntity e2 = BaseEntity::deserialize(&quot;bob&quot;, blob);
});

// ❌ FALSCH: Shared Instanz ohne Lock
BaseEntity shared(&quot;user&quot;);
std::thread t1([&amp;]() { shared.getField(&quot;name&quot;); });  // Race Condition!
std::thread t2([&amp;]() { shared.setField(&quot;age&quot;, 30); });
</code></pre>
<hr />
<h2 id="7-zukunftige-erweiterungen">7. Zukünftige Erweiterungen<a class="headerlink" href="#7-zukunftige-erweiterungen" title="Permanent link">&para;</a></h2>
<ul>
<li>[ ] <strong>Kompression</strong>: LZ4/Snappy für große Blobs</li>
<li>[ ] <strong>Schema-Validation</strong>: Optionale JSON-Schema-Prüfung</li>
<li>[ ] <strong>Nested Objects</strong>: Support für verschachtelte Maps/Arrays</li>
<li>[ ] <strong>Custom Types</strong>: Erweiterbare Type Tags (z. B. Geo-Points, UUIDs)</li>
<li>[ ] <strong>Memory-Mapped Access</strong>: Für sehr große Entities (&gt;1MB)</li>
<li>[ ] <strong>Path Constraints</strong>: Graph-Traversal-Constraints (siehe <a href="../path_constraints/">Path Constraints</a>)</li>
</ul>
<hr />
<h2 id="referenzen">Referenzen<a class="headerlink" href="#referenzen" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>Implementation:</strong> <code>include/storage/base_entity.h</code></li>
<li><strong>Key Schema:</strong> <code>include/storage/key_schema.h</code></li>
<li><strong>simdjson:</strong> https://github.com/simdjson/simdjson</li>
<li><strong>RocksDB Storage:</strong> <a href="../storage/rocksdb_layout/">RocksDB Layout</a></li>
<li><strong>TTL-Indizes:</strong> <a href="../index_stats_maintenance/">Index Stats &amp; Maintenance</a></li>
<li><strong>Retention:</strong> <a href="../time_series/">Time-Series</a></li>
<li><strong>Path Constraints:</strong> <a href="../path_constraints/">Graph Traversal Constraints</a></li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.instant", "content.code.copy"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "In Zwischenablage kopiert", "clipboard.copy": "In Zwischenablage kopieren", "search.result.more.one": "1 weiteres Suchergebnis auf dieser Seite", "search.result.more.other": "# weitere Suchergebnisse auf dieser Seite", "search.result.none": "Keine Suchergebnisse", "search.result.one": "1 Suchergebnis", "search.result.other": "# Suchergebnisse", "search.result.placeholder": "Suchbegriff eingeben", "search.result.term.missing": "Es fehlt", "select.version": "Version ausw\u00e4hlen"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../js/print-site.js"></script>
      
    
  </body>
</html>