# SonarQube Configuration for ThemisDB
# Database-grade quality standards

sonar.projectKey=themisdb
sonar.projectName=ThemisDB
sonar.projectVersion=1.0
sonar.organization=makr-code

# Source configuration
sonar.sources=src,include
sonar.tests=tests,benchmarks
sonar.sourceEncoding=UTF-8

# Language configuration
sonar.language=c++
sonar.cfamily.build-wrapper-output=bw-output
sonar.cfamily.threads=8
sonar.cfamily.cache.enabled=true
sonar.cfamily.cache.path=.sonar-cache

# Compilation database
sonar.cfamily.compile-commands=build-msvc/compile_commands.json

# Exclusions
sonar.exclusions=\
    external/**,\
    vcpkg_installed/**,\
    build-msvc/**,\
    build-wsl/**,\
    **/test_*.cpp,\
    **/bench_*.cpp

sonar.coverage.exclusions=\
    tests/**,\
    benchmarks/**,\
    examples/**

sonar.cpd.exclusions=\
    tests/**,\
    benchmarks/**

# Test configuration
sonar.tests=tests
sonar.test.inclusions=tests/**/*.cpp
sonar.testExecutionReportPaths=test-report.xml

# Coverage (if using gcov/lcov)
sonar.cfamily.gcov.reportsPath=coverage
sonar.coverageReportPaths=coverage/coverage.xml

# Quality Gate
sonar.qualitygate.wait=true
sonar.qualitygate.timeout=300

# Code Quality Rules
sonar.issue.ignore.multicriteria=e1,e2,e3

# Ignore TODO comments in development
sonar.issue.ignore.multicriteria.e1.ruleKey=cpp:S1135
sonar.issue.ignore.multicriteria.e1.resourceKey=**/*.cpp

# Allow some complexity in query engine
sonar.issue.ignore.multicriteria.e2.ruleKey=cpp:S3776
sonar.issue.ignore.multicriteria.e2.resourceKey=**/query_engine.cpp

# Allow platform-specific code
sonar.issue.ignore.multicriteria.e3.ruleKey=cpp:S1301
sonar.issue.ignore.multicriteria.e3.resourceKey=**/platform/*.cpp

# Analysis parameters
sonar.scm.provider=git
sonar.scm.forceReloadAll=false

# Performance
sonar.cfamily.analysisCache.mode=server
sonar.cfamily.analysisCache.path=.sonar-analysis-cache

# Security
sonar.security.hotspots.enabled=true
